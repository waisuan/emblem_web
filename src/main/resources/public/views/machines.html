<main role="main">
    <div class="container">
        <div class="row starter-template">
            <div class="col-md-2 padding-zero">
                <select class="form-control" id="searchTypeOptions" ng-model="searchTypeOption" ng-options="opt.actual as opt.actual for opt in options" ng-change="setMachineSearchFilter()"></select>
            </div>
            <div class="col-md-10 padding-zero">
                <input id="searchValueInput" type="text" class="form-control" placeholder="What are you looking for?" ng-model="searchValue" ng-change="setMachineSearchFilter()">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <table st-table="copyMachines" st-safe-src="machines" class="table table-bordered main-tbl">
                <thead class="thead-light">
                    <tr>
                        <th st-sort="serialNumber">Serial No.</th>
                        <th st-sort="state">State</th>
                        <th st-sort="model">Model</th>
                        <th st-sort="tncDate">TNC Date</th>
                        <th st-sort="ppmDate">PPM Date</th>
                        <th st-sort="customer">Customer</th>
                        <th st-sort="status">Status</th>
                        <th st-sort="accountType">Account Type</th>
                        <th st-sort="brand">Brand</th>
                        <th st-sort="personInCharge">Person in Charge</th>
                        <th st-sort="reportedBy">Reported By</th>
                        <th st-sort="dateOfCreation">Created On</th>
                        <th st-sort="lastUpdated">Last Updated On</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="machine in currMachines = (copyMachines | filter:machineFilter) | limitTo: machinesPerPage: machinesPerPage*(currentPage-1)">
                        <td>
                            {{machine.serialNumber}}
                        </td>
                        <td>
                            {{machine.state}}
                        </td>
                        <td>
                            {{machine.model}}
                        </td>
                        <td>
                            {{machine.tncDate}}
                        </td>
                        <td>
                            {{machine.ppmDate}}
                        </td>
                        <td>
                            {{machine.customer}}
                        </td>
                        <td>
                            {{machine.status}}
                        </td>
                        <td>
                            {{machine.accountType}}
                        </td>
                        <td>
                            {{machine.brand}}
                        </td>
                        <td>
                            {{machine.personInCharge}}
                        </td>
                        <td>
                            {{machine.reportedBy}}
                        </td>
                        <td>
                            {{machine.dateOfCreation}}
                        </td>
                        <td>
                            {{machine.lastUpdated}}
                        </td>
                        <td>
                            <a href="#/edit_machine/{{machine.serialNumber}}" title="Edit machine"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
                            <a ng-click="setDelAim( machine )" onclick="return false;" href="#del" data-toggle="modal" data-target="#del" title="Delete machine"><i class="fa fa-times" aria-hidden="true"></i></a>
                            <a href="#/add_history/{{machine.serialNumber}}" title="Add history"><i class="fa fa-plus" aria-hidden="true"></i></a>
                            <a href="#/history/{{machine.serialNumber}}" title="Show history"><i class="fa fa-history" aria-hidden="true"></i></a>
                            <a ng-click="showNotes( machine.additionalNotes )" onclick="return false;" href="#notes" data-toggle="modal" title="Show Notes"><i class="fa fa-sticky-note" aria-hidden="true"></i></a>
                        </td>
                    </tr>
                </tbody>
                <!-- <tfoot>
                    <tr>
                        <td colspan="14">
                            <ul uib-pagination boundary-links="true" total-items="totalItems" ng-model="currentPage" class="pagination justify-content-center" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul>
                        </td>
                    </tr>
                </tfoot> -->
            </table>
            <ul uib-pagination boundary-links="true" max-size="pagesToDisplay" force-ellipses="true" rotate="false" items-per-page="machinesPerPage" total-items="currMachines.length" ng-model="currentPage" ng-change="changePage()" class="pagination justify-content-center" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul>
        </div>
    </div>
    <div class="modal fade" id="del" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5>Are you sure you want to delete this record forever?</h2>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" ng-click="delMachine()">Yes</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="notes" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-body">
              <textarea rows=15 id="notes-area" readonly>{{notes}}</textarea>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
  </div>
</main>
